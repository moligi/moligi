<!DOCTYPE html>

<html lang="en" dir="ltr">

	<head>
	        <meta charset="utf-8">
		<title>Date Picker</title>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tachyons/4.9.1/tachyons.min.css" />
    
    
    		
	</head>
	
	<body>
		<div class="w-100 tc">
      <div id="example" class="pa3">
      </div>
    </div>
   <script src="example.js"></script>
   <script type="text/javascript">
        Array.prototype.slice
          .apply(document.getElementsByClassName("example"))
          .forEach(function (ex) {
            ex.addEventListener("click", function (e) {
              Elm[e.target.hash.slice(1)].embed(document.getElementById("example"));
            });
          });
        // initially render the "Styled" example to avoid "blank page" on initial page load:
        Elm['Range'].embed(document.getElementById("example"));
			       function test(){
       }
	   </script>
		<script>
          (function (d, s, id) {
              var js, fjs = d.getElementsByTagName(s)[0];
              if (d.getElementById(id)) {
                  return;
              }
              js = d.createElement(s);
              js.id = id;
              js.src = "//connect.facebook.com/en_US/messenger.Extensions.js";
              fjs.parentNode.insertBefore(js, fjs);
              }(document, 'script', 'Messenger'));
       
         window.extAsyncInit = function () {
              // SDK loaded, code to follow
              var isSupported = MessengerExtensions.isInExtension(); 
              //alert('Is MessengerExtensions supported: ' + isSupported);
              MessengerExtensions.getSupportedFeatures(function success(result) {
                  let features = result.supported_features;
                   //alert('Supported Facebook Features: ' + features);
                     MessengerExtensions.getContext('214020109069642',
                       function success(thread_context) {
                        // success
                        //document.getElementById("psid").value = thread_context.psid;
                        //alert('PSID of current thread: ' + thread_context.psid);
                        
                        // More code to follow
                      },
                      function error(err) {
                        alert(err);
                      }
                    );
                  
                }, function error(err) {
                  alert(err);
                });
            };
       
       function sendMessage() {
           
            /// how to return? the facebook docs don't say anything
            /// you HAVE to make a server round trip.. https://stackoverflow.com/questions/43956045/messengerextensions-how-to-send-a-message-by-messenger-to-users
            return {
                text: "HOTEL_SERVICE_PAYLOAD",
              
            }
            MessengerExtensions.requestCloseBrowser(function success() {

            }, function error(err) {

            });
        }
    </script>


 
 
    <button type="button" id="submit_button" onclick="sendMessage();" style = "margin-left:49.999%;">確定</button>
	
	
</body>
	
</html>
	
